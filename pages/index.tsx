import type { NextPage } from "next";
import Head from "next/head";
import { useEffect } from "react";
import Dashboard from "../components/Dashboard";
import MessageBox from "../components/MessageBox";
import MessageInput from "../components/MessageInput";
import useScenario from "../hooks/useScenario";

const Home: NextPage = () => {
	const { setNewScenario, messageBoxID, openMessageBox } = useScenario();

	useEffect(() => {
		setNewScenario("hamburger");
	}, []);

	return (
		<>
			<Head>
				<title>Message Bot Showcase {process.env.NODE_ENV}</title>
				{process.env.NODE_ENV !== "development" && (
					<meta
						httpEquiv="Content-Security-Policy"
						content="upgrade-insecure-requests"
					></meta>
				)}
				<meta name="description" content="Generated by create next app" />
				<link rel="icon" href="/favicon.ico" />
			</Head>

			<div className="flex w-full min-w-fit min-h-screen bg-gray-800 text-white p-10 overflow-x-clip">
				<div className="flex flex-col justify-center lg:flex-row lg:w-full lg:max-w-screen-2xl mx-auto">
					<Dashboard openMessageBox={openMessageBox} />
					<div className="flex flex-col lg:w-1/3 h-5/6 gap-2">
						<div className="flex flex-col gap-5 p-5">
							<a
								className="text-orange-400 inline-flex items-center ml-4"
								onClick={() => {
									setNewScenario("hamburger");
								}}
							>
								Run scenario
								<svg
									fill="none"
									stroke="currentColor"
									strokeLinecap="round"
									strokeLinejoin="round"
									strokeWidth="2"
									className="w-4 h-4 ml-2"
									viewBox="0 0 24 24"
								>
									<path d="M5 12h14M12 5l7 7-7 7"></path>
								</svg>
							</a>
							<a
								className="text-orange-400 inline-flex items-center ml-4"
								onClick={() => {
									setNewScenario("empty");
								}}
							>
								Start with empty message box
								<svg
									fill="none"
									stroke="currentColor"
									strokeLinecap="round"
									strokeLinejoin="round"
									strokeWidth="2"
									className="w-4 h-4 ml-2"
									viewBox="0 0 24 24"
								>
									<path d="M5 12h14M12 5l7 7-7 7"></path>
								</svg>
							</a>
						</div>
						<div className="flex flex-col mx-auto w-full max-w-lg lg:max-w-full">
							<MessageBox messageBoxID={messageBoxID}></MessageBox>
							<MessageInput messageBoxID={messageBoxID}></MessageInput>
						</div>
					</div>
				</div>
			</div>
		</>
	);
};

export default Home;
